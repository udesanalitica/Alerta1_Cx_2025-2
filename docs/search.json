[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Alerta 1. Anal√≠tica Acad√©mica",
    "section": "",
    "text": "Cr√©ditos\n\n\n\n\nDirectivas\nAutores\n\n\n\n\nRector General\nJos√© Patricio L√≥pez Jaramillo\nRectora Campus C√∫cuta\nCarmen Elisa Araque P√©rez\nRector Campus Valledupar\nCarlos Dar√≠o Mor√≥n Cuello\nVicerrector de Ense√±anza\nCesar Augusto Serrano Novoa\nDirectora Administrativa y Financiera\nAng√©lica Mar√≠a Calder√≥n Plata\nDirectora de Desarrollo Estudiantil\nSilvia Juliana Suesc√∫n Garc√©s\nDirectora de Bienestar Institucional\nAna Francisca Mart√≠nez Quintero\nDirector de Anal√≠tica Acad√©mica1\nMiguel Oswaldo P√©rez Pulido\n\nCoordinador de Anal√≠tica Acad√©mica\nFrancisco Javier Le√≥n\n\nProfesional en Investigaci√≥n de Mercados\nLeonardo Andr√©s Pinto Guarguat√≠ ¬†\n\nDirector de Gesti√≥n Curricular \nOmar Camilo Mej√≠a Ardila\n\n\n\n\n1¬†Si desea obtener m√°s informaci√≥n estad√≠stica acad√©mica de este documento de trabajo o de la Instituci√≥n puede consultar el micrositio en el Observatorio de Anal√≠tica Acad√©mica o por correo electr√≥nico analitica.academica@udes.edu.co¬†\n\n\n\n\n\nPara citar\n\n\n\nP√©rez, M., Le√≥n, F., Pinto, L., y Mej√≠a, O. (2025). Documento de Anal√≠tica Acad√©mica No 28. Caracterizaci√≥n de estudiantes presenciales de pregrado reci√©n ingreso periodo 2025-1. Universidad de Santander. Vicerrector√≠a de Ense√±anza. https://udes.edu.co/ensenanza/dependencias/analitica-academica/informes-y-documentos.\n\n\n\n\n\n\n\n\nDerechos de Autor\n\n\n\nUniversidad de Santander (UDES)\nCalle 70 #N¬∞ 55-210\nBucaramanga, Santander, Colombia\nhttps://www.udes.edu.co/",
    "crumbs": [
      "Cr√©ditos"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1¬† Introducci√≥n",
    "section": "",
    "text": "La caracterizaci√≥n de estudiantes es una herramienta fundamental que permite a la Universidad conocer a los alumnos de nuevo ingreso, analizando aspectos socioecon√≥micos, acad√©micos, culturales y biopsicosociales. Su prop√≥sito principal es ofrecer un acercamiento integral al estudiante, facilitando la identificaci√≥n de factores que influyen en su desempe√±o y bienestar durante la vida universitaria.\nEste proceso no solo beneficia a los estudiantes, al proporcionar alertas y recomendaciones sobre h√°bitos de autocuidado, sino tambi√©n a la Universidad, al optimizar los programas y servicios de Bienestar Institucional. A trav√©s de la recopilaci√≥n de datos, se construye un perfil general del estudiante UDES, permitiendo identificar aspectos clave como salud, seguridad social, situaci√≥n acad√©mica, condiciones sociofamiliares, nivel socioecon√≥mico, empleo, bienestar psicol√≥gico y afectivo, identidad de g√©nero, orientaci√≥n sexual, nutrici√≥n y actividad f√≠sica, entre otros.\nEn el segundo semestre de 2024, se implementaron actualizaciones en la caracterizaci√≥n estudiantil, especialmente en las secciones de aspectos sociodemogr√°ficos y salud integral. Entre las nuevas preguntas, se incluyeron temas sobre movilidad, como el tipo de combustible utilizado en los veh√≠culos de los estudiantes, su medio de transporte habitual para llegar a la Universidad y la posibilidad de compartirlo con otros compa√±eros de la misma zona. En el √°mbito de salud integral, se incorporaron interrogantes relacionadas con la pertenencia a grupos poblacionales y √©tnicos, identidad de g√©nero y orientaci√≥n sexual, con el fin de fomentar un ambiente universitario m√°s inclusivo y diverso.\nGracias a esta caracterizaci√≥n, la Universidad podr√° reconocer mejor las necesidades de los estudiantes de primer ingreso y orientar acciones de intervenci√≥n que contribuyan a su adaptaci√≥n y √©xito acad√©mico.",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introducci√≥n</span>"
    ]
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "2¬† Aspectos metodol√≥gicos",
    "section": "",
    "text": "2.1 Ficha t√©cnica",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Aspectos metodol√≥gicos</span>"
    ]
  },
  {
    "objectID": "summary.html#ficha-t√©cnica",
    "href": "summary.html#ficha-t√©cnica",
    "title": "2¬† Aspectos metodol√≥gicos",
    "section": "",
    "text": "Categor√≠a\nDescripci√≥n\n\n\n\n\nPoblaci√≥n objetivo\nEstudiantes de reci√©n ingreso a la Universidad de Santander en el periodo 2025-1\n\n\nCampus\nBucaramanga, C√∫cuta, Valledupar\n\n\nTotal estudiantes\n\n\n\nM√©todo de recolecci√≥n de datos\nFormulario multicampus (111 preguntas)\n\n\nAspectos evaluados\nSesi√≥n 1. Informaci√≥n personal y acad√©mica\nSesi√≥n 2. Aspectos sociodemogr√°ficos\nSesi√≥n 3. Salud integral\nSesi√≥n 4. Fomento de la cultura\nSesi√≥n 5. Deportes y esparcimiento\nSesi√≥n 6. Desarrollo humano\n\n\nPeriodo de aplicaci√≥n\n03 de febrero al 03 de marzo de 2025\n\n\nTasa de respuesta\n\n\n\nHerramienta de tabulaci√≥n\nExcel, RStudio",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Aspectos metodol√≥gicos</span>"
    ]
  },
  {
    "objectID": "summary.html#n√∫mero-de-estudiantes-encuestados",
    "href": "summary.html#n√∫mero-de-estudiantes-encuestados",
    "title": "2¬† Aspectos metodol√≥gicos",
    "section": "2.2 N√∫mero de estudiantes encuestados",
    "text": "2.2 N√∫mero de estudiantes encuestados\nLa encuesta se aplic√≥ a estudiantes de primer semestre, y en el gr√°fico se muestra la cantidad de estudiantes que la respondieron, distribuidos por programa acad√©mico y campus.\n\n\n\n\n\n\n\n\n\n\n\n\nAbreviaturas de programas acad√©micos\n\n\n\n ANTR: Antropolog√≠a, INQU: Instrumentaci√≥n Quir√∫rgica, MYPB: Mercadeo y Publicidad, ADFI: Administraci√≥n Financiera, TEOC: Terapia Ocupacional, FONO: Fonoaudiolog√≠a, FISI: Fisioterapia, ININ: Ingenier√≠a Industrial, TCGF: Tecnolog√≠a en Comunicaci√≥n Gr√°fica, BACT: Bacteriolog√≠a y Laboratorio Cl√≠nico, MEDI: Medicina, ADNI: Administraci√≥n de Negocios Internacionales, INCI: Ingenier√≠a Civil, PSIC: Psicolog√≠a, LEIN: Licenciatura en Educaci√≥n Infantil, ENFE: Enfermer√≠a, DERE: Derecho, MBIN: Microbiolog√≠a Industrial, MEVE: Medicina Veterinaria, INAG: Ingenier√≠a Agroindustrial, INSO: Ingenier√≠a de Software, CONT: Contadur√≠a P√∫blica, TSOC: Tecnolog√≠a en Supervisi√≥n de Obras Civiles, COSP: Comunicaci√≥n Social y Periodismo, GEOL: Geolog√≠a, ICCI: Ingenier√≠a en Ciencias de la Computaci√≥n e Inteligencia Artificial, INSI: Ingenier√≠a de Sistemas, DIGR: Dise√±o Gr√°fico, COEX: Comercio Exterior, MVZC: Medicina Veterinaria y Zootecnia, IQBO: Instrumentaci√≥n Quir√∫rgica (Bogot√°), TLAC: T√©cnico Laboral en Competencias para Auxiliar de Cl√≠nica Veterinaria.",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Aspectos metodol√≥gicos</span>"
    ]
  },
  {
    "objectID": "summary.html#tasa-de-respuesta",
    "href": "summary.html#tasa-de-respuesta",
    "title": "2¬† Aspectos metodol√≥gicos",
    "section": "2.3 Tasa de respuesta",
    "text": "2.3 Tasa de respuesta\nFalta hacer estas tablas‚Äî- muestra la cantidad de estudiantes que la respondieron, distribuidos por programa acad√©mico y campus.\n\n\n\n\n\n\n\n\n\nProgramas\nRespuesta encuesta\nMatriculados primer semestre\n% de respuesta\n\n\nAdministraci√≥n de negocios internacionales\n15\n16\n94\n\n\nAministraci√≥n financiera\n18\n23\n78\n\n\nAntropolog√≠a\n7\n7\n100\n\n\nBacteriolog√≠a y laboratorio cl√≠nico\n29\n29\n100\n\n\nComunicaci√≥n social y periodismo\n9\n10\n90\n\n\nContadur√≠a p√∫blica\n10\n10\n100\n\n\nDerecho\n13\n20\n65\n\n\nEnfermer√≠a\n18\n24\n75\n\n\nFisioterapia\n28\n37\n76\n\n\nFonoaudiolog√≠a\n18\n19\n95\n\n\nGeolog√≠a\n5\n9\n56\n\n\nIngenier√≠a agroindustrial\n9\n11\n82\n\n\nIngenier√≠a civil\n15\n20\n75\n\n\nIngenier√≠a de software\n56\n60\n93\n\n\nIngenier√≠a en ciencias de la computaci√≥n e inteligencia artificial\n8\n10\n80\n\n\nIngenier√≠a industrial\n7\n9\n78\n\n\nInstrumentaci√≥n quir√∫rgica\n51\n52\n98\n\n\nInstrumentaci√≥n quir√∫rgica - BOG\n27\n28\n96\n\n\nLicenciatura en educaci√≥n infantil\n11\n11\n100\n\n\nMedicina\n51\n57\n89\n\n\nMedicina veterinaria\n66\n73\n90\n\n\nMercadeo y publicidad\n26\n26\n100\n\n\nMicrobiolog√≠a industrial\n14\n14\n100\n\n\nPsicolog√≠a\n25\n25\n100\n\n\nTecnolog√≠a en comunicaci√≥n grafica\n22\n24\n92\n\n\nTecnolog√≠a supervisi√≥n de obras civiles\n5\n5\n100\n\n\nTerapia ocupacional\n17\n17\n100\n\n\nTotal\n560\n646\n86",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Aspectos metodol√≥gicos</span>"
    ]
  },
  {
    "objectID": "Sesion1.html",
    "href": "Sesion1.html",
    "title": "3¬† Sesi√≥n 1. Informaci√≥n personal y Acad√©mica",
    "section": "",
    "text": "3.1 Distribuci√≥n geogr√°fica nacional\nLa distribuci√≥n de los departamentos de procedencia de los estudiantes se refleja en el mapa, coSantander liderando la participaci√≥n con un 69.3% del total de estudiantes. Le siguen Cesar con 9.9% y Norte de Santander con 5.1%, consolid√°ndose como las regiones con mayor representaci√≥n.\nLos dem√°s departamentos registran una participaci√≥n conjunta del 15.7%, destacando entre ellos Amazonas, Huila, Tolima y Antioquia, entre otros. Aunque su presencia es menor, su participaci√≥n evidencia la diversidad geogr√°fica de los estudiantes y el alcance regional de la instituci√≥n.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Sesi√≥n 1. Informaci√≥n personal y Acad√©mica</span>"
    ]
  },
  {
    "objectID": "Sesion1.html#distribuci√≥n-geogr√°fica-departamental",
    "href": "Sesion1.html#distribuci√≥n-geogr√°fica-departamental",
    "title": "3¬† Sesi√≥n 1. Informaci√≥n personal y Acad√©mica",
    "section": "3.2 Distribuci√≥n geogr√°fica departamental",
    "text": "3.2 Distribuci√≥n geogr√°fica departamental\nLa distribuci√≥n de los estudiantes en los municipios de Santander se refleja en el mapa. Bucaramanga concentra el 47.3% del total de estudiantes, mientras que el √°rea metropolitana de Bucaramanga, incluyendo Floridablanca, Piedecuesta y Gir√≥n, alcanza una representaci√≥n del 78.6%.\nPor su parte, Barrancabermeja registra una participaci√≥n del 7.3%, siendo el municipio con mayor presencia fuera del √°rea metropolitana. El resto de los municipios de Santander representan en conjunto el 14%.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Sesi√≥n 1. Informaci√≥n personal y Acad√©mica</span>"
    ]
  },
  {
    "objectID": "Sesion1.html#perfil-demogr√°fico",
    "href": "Sesion1.html#perfil-demogr√°fico",
    "title": "3¬† Sesi√≥n 1. Informaci√≥n personal y Acad√©mica",
    "section": "3.3 Perfil Demogr√°fico",
    "text": "3.3 Perfil Demogr√°fico\n\n\n\n\n\n\nDescripci√≥n de las gr√°ficas de forma general\n\n\n\nEl 96% de estos estudiantes son solteros, y el 98% son colombianos. Adem√°s, tambi√©n se encuentran estudiantes de origen espa√±ol, ecuatoriano, estadounidense y venezolano y mexicano. En relaci√≥n con el sexo, el 60,2% de los participantes eran mujeres y el 39,8% eran hombres.\nEn el campus Bucaramanga, la edad promedio de los estudiantes es de 18 a√±os\nEsta gr√°fica muestra la distribuci√≥n porcentual de estudiantes por pa√≠s de origen. Se observa que la mayor√≠a proviene de Colombia, seguida por pa√≠ses vecinos como Venezuela.\n\n\nEdad\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAbreviaturas de programas acad√©micos\n\n\n\n ANTR: Antropolog√≠a, INQU: Instrumentaci√≥n Quir√∫rgica, MYPB: Mercadeo y Publicidad, ADFI: Administraci√≥n Financiera, TEOC: Terapia Ocupacional, FONO: Fonoaudiolog√≠a, FISI: Fisioterapia, ININ: Ingenier√≠a Industrial, TCGF: Tecnolog√≠a en Comunicaci√≥n Gr√°fica, BACT: Bacteriolog√≠a y Laboratorio Cl√≠nico, MEDI: Medicina, ADNI: Administraci√≥n de Negocios Internacionales, INCI: Ingenier√≠a Civil, PSIC: Psicolog√≠a, LEIN: Licenciatura en Educaci√≥n Infantil, ENFE: Enfermer√≠a, DERE: Derecho, MBIN: Microbiolog√≠a Industrial, MEVE: Medicina Veterinaria, INAG: Ingenier√≠a Agroindustrial, INSO: Ingenier√≠a de Software, CONT: Contadur√≠a P√∫blica, TSOC: Tecnolog√≠a en Supervisi√≥n de Obras Civiles, COSP: Comunicaci√≥n Social y Periodismo, GEOL: Geolog√≠a, ICCI: Ingenier√≠a en Ciencias de la Computaci√≥n e Inteligencia Artificial, INSI: Ingenier√≠a de Sistemas, DIGR: Dise√±o Gr√°fico, COEX: Comercio Exterior, MVZC: Medicina Veterinaria y Zootecnia, IQBO: Instrumentaci√≥n Quir√∫rgica (Bogot√°), TLAC: T√©cnico Laboral en Competencias para Auxiliar de Cl√≠nica Veterinaria. \n\n\nEstado civil\n\n\n\n\n\n\n\n\n\n\n\n\nDescripci√≥n para todos los campus\n\n\n\nEsta gr√°fica muestra la distribuci√≥n porcentual de estudiantes por pa√≠s de origen. Se observa que la mayor√≠a proviene de Colombia, seguida por pa√≠ses vecinos como Venezuela.\n\n\nSexo\n\n\n\n\n\n\n\n\n\n\n\n\nDescripci√≥n para todos los campus\n\n\n\nEsta gr√°fica muestra la distribuci√≥n porcentual de estudiantes por pa√≠s de origen. Se observa que la mayor√≠a proviene de Colombia, seguida por pa√≠ses vecinos como Venezuela.\n\n\nPais de origen\n\n\n\n\n\n\n\n\n\n\n\n\nDescripci√≥n para todos los campus\n\n\n\nEsta gr√°fica muestra la distribuci√≥n porcentual de estudiantes por pa√≠s de origen. Se observa que la mayor√≠a proviene de Colombia, seguida por pa√≠ses vecinos como Venezuela.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Sesi√≥n 1. Informaci√≥n personal y Acad√©mica</span>"
    ]
  },
  {
    "objectID": "filtro.html",
    "href": "filtro.html",
    "title": "4¬† Campus Filtro",
    "section": "",
    "text": "4.1 Distribuci√≥n de Edad por Campus\nSeleccione un campus para visualizar la distribuci√≥n de edad correspondiente. El gr√°fico se actualiza autom√°ticamente con base en su selecci√≥n.\nlibrary(dplyr)\nlibrary(plotly)\n\n# Preparar datos\ndata_plot_drop &lt;- datos |&gt;\n  filter(campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\"), !is.na(edad)) |&gt;\n  mutate(campus_total = campus)  # duplicar para crear opci√≥n \"Todos\"\n\n# Agregar fila con etiqueta \"Todos\"\ndata_total &lt;- data_plot_drop |&gt; \n  mutate(campus = \"Todos\")  # etiqueta adicional\n\n# Combinar\ndata_all &lt;- bind_rows(data_plot_drop, data_total)\n\n# Lista de opciones del dropdown\ncampus_levels &lt;- unique(data_all$campus)\n\n# Crear gr√°fico interactivo\npd &lt;- data_all |&gt;\n  plot_ly(\n    type = 'histogram',\n    x = ~edad,\n    autobinx = FALSE,\n    xbins = list(start = 0, end = 40, size = 2),\n    marker = list(color = '#004899'),\n    transforms = list(\n      list(\n        type = 'filter',\n        target = ~campus,\n        operation = '=',\n        value = \"Todos\"  # Mostrar todos inicialmente\n      )\n    )\n  ) |&gt; layout(\n    title = \"Distribuci√≥n de la Edad por Campus\",\n    xaxis = list(title = \"Edad\"),\n    yaxis = list(title = \"Frecuencia\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(campus_levels, function(c) {\n          list(\n            method = \"restyle\",\n            args = list(\"transforms[0].value\", c),\n            label = c\n          )\n        })\n      )\n    )\n  )\n\npd\nlibrary(dplyr)\nlibrary(plotly)\n\n# Preparar datos\ndata_plot_drop &lt;- datos |&gt;\n  filter(campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\"), !is.na(edad)) |&gt;\n  mutate(campus_total = campus)  # duplicar para crear opci√≥n \"Todos\"\n\n# Agregar fila con etiqueta \"Todos\"\ndata_total &lt;- data_plot_drop |&gt; \n  mutate(campus = \"Todos\")  # etiqueta adicional\n\n# 1. Agrupar edades por intervalos\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus)) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE)) %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n\n# 2. Crear gr√°fico con filtro interactivo\nplot_ly(\n  data = datos_plot,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~paste0(pct, \"%\"),\n  textposition = \"outside\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = unique(datos_plot$campus)[1]\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n porcentual de la Edad por campus (hasta 40 a√±os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a√±os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje (%)\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_plot$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\n\nWarning: Ignoring 2 observations\n# Buscar caracteres no v√°lidos en 'programa'\nproblemas &lt;- datos %&gt;%\n  filter(!is.na(programa)) %&gt;%\n  filter(is.na(iconv(programa, from = \"\", to = \"UTF-8\")))\n\nprint(problemas$programa)\n\ncharacter(0)\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos)\n\n# 5. Crear gr√°fico interactivo con filtro\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~paste0(pct, \"%\"),\n  textposition = \"outside\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"  # valor por defecto\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n porcentual de la Edad por campus (hasta 40 a√±os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a√±os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(etiqueta = paste0(\"Campus: \", campus, \"&lt;br&gt;\",\n                           \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n                           \"Porcentaje: \", pct, \"%\"))\n\n# 5. Crear gr√°fico interactivo con filtro\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~etiqueta,\n  textposition = \"outside\",\n  hoverinfo = \"text\",  # &lt;&lt;-- evita duplicados\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"  # valor por defecto\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n porcentual de la Edad por campus (hasta 40 a√±os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a√±os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(etiqueta = paste0(\"Campus: \", campus, \"&lt;br&gt;\",\n                           \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n                           \"Porcentaje: \", pct, \"%\"))\n\n# 5. Gr√°fico interactivo sin texto visible permanente\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~etiqueta,\n  hoverinfo = \"text\",  # Solo aparece al pasar el mouse\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n porcentual de la Edad por campus (hasta 40 a√±os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a√±os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(hover_text = paste0(\n    \"Campus: \", campus, \"&lt;br&gt;\",\n    \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n    \"Porcentaje: \", pct, \"%\"\n  ))\n\n# 5. Gr√°fico sin etiquetas visibles, solo en hover\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  hovertext = ~hover_text,\n  hoverinfo = \"text\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n porcentual de la Edad por campus (hasta 40 a√±os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a√±os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Filtrar y agrupar por estado civil y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Datos para 'Todos'\ntodos &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  group_by(est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Combinar\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Crear gr√°fico de pastel con filtro\nfig &lt;- plot_ly(type = 'pie', hole = 0.3)  # Gr√°fico vac√≠o base\n\n# Campus √∫nicos\ncampus_niveles &lt;- unique(datos_final$campus)\n\n# A√±adir una traza por cada campus\nfor (i in seq_along(campus_niveles)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == campus_niveles[i])\n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$est_civ,\n    values = datos_c$n,\n    name = campus_niveles[i],\n    visible = ifelse(i == 1, TRUE, FALSE),  # Solo el primero visible\n    type = \"pie\",\n    textinfo = \"percent+label\",\n    sort = FALSE,\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 5. Dropdown para filtros\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci√≥n del estado civil por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    active = 0,\n    type = \"dropdown\",\n    buttons = lapply(seq_along(campus_niveles), function(i) {\n      list(\n        method = \"restyle\",\n        args = list(\"visible\", as.list(seq_along(campus_niveles) == i)),\n        label = campus_niveles[i]\n      )\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar datos por campus y estado civil\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Datos combinados para \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  group_by(est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Combinar todos los campus\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Crear gr√°fico con filtro interactivo sin agujero\nfig &lt;- plot_ly(type = 'pie')  # SIN `hole = 0.3`\n\n# Campus disponibles\ncampus_niveles &lt;- unique(datos_final$campus)\n\n# A√±adir una traza por campus\nfor (i in seq_along(campus_niveles)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == campus_niveles[i])\n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$est_civ,\n    values = datos_c$n,\n    name = campus_niveles[i],\n    visible = ifelse(i == 1, TRUE, FALSE),  # Solo visible el primero\n    type = \"pie\",\n    textinfo = \"percent+label\",\n    sort = FALSE,\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 5. Filtro interactivo (dropdown)\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci√≥n del estado civil por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    active = 0,\n    type = \"dropdown\",\n    buttons = lapply(seq_along(campus_niveles), function(i) {\n      list(\n        method = \"restyle\",\n        args = list(\"visible\", as.list(seq_along(campus_niveles) == i)),\n        label = campus_niveles[i]\n      )\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos (campus y estado civil)\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  count(est_civ, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Unir todos\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Lista de campus\nniveles_campus &lt;- unique(datos_final$campus)\n\n# 5. Paleta pastel (tantos colores como categor√≠as de estado civil)\ncolores_pastel &lt;- brewer.pal(n = max(3, length(unique(datos_final$est_civ))), name = \"Pastel1\")\n\n# 6. Crear gr√°fico base con todas las trazas invisibles excepto la inicial\nfig &lt;- plot_ly(type = \"pie\")\n\nfor (i in seq_along(niveles_campus)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == niveles_campus[i])\n  \n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$est_civ,\n    values = datos_c$n,\n    type = \"pie\",\n    name = niveles_campus[i],\n    visible = ifelse(i == 1, TRUE, FALSE),\n    textinfo = \"label+percent\",\n    hoverinfo = \"label+percent+value\",\n    sort = FALSE,\n    marker = list(colors = colores_pastel),\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 7. Layout con men√∫ desplegable\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci√≥n del estado civil por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    type = \"dropdown\",\n    direction = \"down\",\n    x = 0.1, y = 1.2,\n    buttons = lapply(seq_along(niveles_campus), function(i) {\n      visibilidad &lt;- rep(FALSE, length(niveles_campus))\n      visibilidad[i] &lt;- TRUE\n      list(method = \"restyle\",\n           args = list(\"visible\", visibilidad),\n           label = niveles_campus[i])\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos (campus y sexo)\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(sexo_id), campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, sexo_id) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(sexo_id)) %&gt;%\n  count(sexo_id, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Unir todos\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Lista de campus\nniveles_campus &lt;- unique(datos_final$campus)\n\n# 5. Paleta pastel (tantos colores como categor√≠as de estado civil)\ncolores_pastel &lt;- brewer.pal(n = max(3, length(unique(datos_final$est_civ))), name = \"Pastel1\")\n\nWarning: Unknown or uninitialised column: `est_civ`.\n\n# 6. Crear gr√°fico base con todas las trazas invisibles excepto la inicial\nfig &lt;- plot_ly(type = \"pie\")\n\nfor (i in seq_along(niveles_campus)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == niveles_campus[i])\n  \n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$sexo_id,\n    values = datos_c$n,\n    type = \"pie\",\n    name = niveles_campus[i],\n    visible = ifelse(i == 1, TRUE, FALSE),\n    textinfo = \"label+percent\",\n    hoverinfo = \"label+percent+value\",\n    sort = FALSE,\n    marker = list(colors = colores_pastel),\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 7. Layout con men√∫ desplegable\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci√≥n del sexo por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    type = \"dropdown\",\n    direction = \"down\",\n    x = 0.1, y = 1.2,\n    buttons = lapply(seq_along(niveles_campus), function(i) {\n      visibilidad &lt;- rep(FALSE, length(niveles_campus))\n      visibilidad[i] &lt;- TRUE\n      list(method = \"restyle\",\n           args = list(\"visible\", visibilidad),\n           label = niveles_campus[i])\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Preparar los datos: cuenta y porcentaje\nestado_civil_df &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  count(est_civ) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1),\n         label = paste0(est_civ, \": \", pct, \"%\"))\n\n# 2. Gr√°fico de pastel interactivo\nplot_ly(\n  data = estado_civil_df,\n  labels = ~est_civ,\n  values = ~pct,\n  type = 'pie',\n  textinfo = 'label+percent',\n  hoverinfo = 'text',\n  text = ~label,\n  marker = list(colors = RColorBrewer::brewer.pal(n = max(3, nrow(estado_civil_df)), name = \"Pastel1\"))\n) %&gt;%\n  layout(\n    title = \"Estado civil de los estudiantes\",\n    showlegend = TRUE\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por campus y estado civil\nestado_civil_df &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ)) %&gt;%\n  count(campus, est_civ, name = \"n\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 2. Agregar una categor√≠a \"Todos\"\ntodos_df &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  count(est_civ, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\",\n         pct = round(100 * n / sum(n), 1))\n\n# 3. Combinar ambas\nestado_civil_full &lt;- bind_rows(estado_civil_df, todos_df)\n\n# 4. Crear gr√°fico interactivo\nplot_ly(\n  data = estado_civil_full %&gt;% filter(campus == \"Todos\"),\n  labels = ~est_civ,\n  values = ~pct,\n  type = 'pie',\n  textinfo = 'label+percent',\n  insidetextorientation = 'radial',\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n de estado civil por campus\",\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(estado_civil_full$campus), function(c) {\n          list(\n            method = \"restyle\",\n            args = list(\"transforms[0].value\", c),\n            label = c\n          )\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos (campus y estado civil)\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, prog_abrev) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(prog_abrev)) %&gt;%\n  count(est_civ, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Unir todos\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Lista de campus\nniveles_campus &lt;- unique(datos_final$campus)\n\n\nplot_ly(data=datos, x = ~campus, y = ~edad, color = ~campus, type = \"box\")\nlibrary(plotly)\nplot_ly(data=datos, x = ~ prog_abrev, y = ~edad, color = ~prog_abrev, type = \"box\")\n\nWarning in RColorBrewer::brewer.pal(N, \"Set2\"): n too large, allowed maximum for palette Set2 is 8\nReturning the palette you asked for with that many colors\nWarning in RColorBrewer::brewer.pal(N, \"Set2\"): n too large, allowed maximum for palette Set2 is 8\nReturning the palette you asked for with that many colors\n\n\n\n\n\nshowlegend = FALSE  # üëà Asegurar que se oculte la leyenda general\n\n# Convertir columnas de texto a UTF-8\ndatos &lt;- datos %&gt;%\n  mutate(across(where(is.character), ~ iconv(., from = \"\", to = \"UTF-8\")))\n\ndatos &lt;- datos %&gt;%\n  mutate(across(where(is.character), ~ iconv(., from = \"\", to = \"UTF-8\", sub = \"\")))\n\n# Buscar caracteres no v√°lidos en 'programa'\nproblemas &lt;- datos %&gt;%\n  filter(!is.na(prog_abrev)) %&gt;%\n  filter(is.na(iconv(prog_abrev, from = \"\", to = \"UTF-8\")))\n\nprint(problemas$prog_abrev)\n\ncharacter(0)\nlibrary(dplyr)\nlibrary(plotly)\n\n# Asegurar codificaci√≥n UTF-8\ndatos &lt;- datos %&gt;%\n  mutate(across(where(is.character), ~ iconv(., from = \"\", to = \"UTF-8\", sub = \"\")))\n\n# Agregar opci√≥n \"Todos\"\ndatos_todos &lt;- datos %&gt;%\n  filter(!is.na(prog_abrev), !is.na(edad)) %&gt;%\n  mutate(campus = \"Todos\")\n\ndatos_final &lt;- bind_rows(datos, datos_todos)\n\n# Niveles de campus\nniveles_campus &lt;- c(\"Todos\", \"Bucaramanga\", \"Cucuta\", \"Valledupar\")\n\n# Crear gr√°fico base con todas las trazas (una por campus)\nfig &lt;- plot_ly()\n\nfor (i in seq_along(niveles_campus)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == niveles_campus[i])\n  \n  fig &lt;- fig %&gt;%\n    add_boxplot(\n      data = datos_c,\n      x = ~prog_abrev,\n      y = ~edad,\n      name = niveles_campus[i],\n      visible = ifelse(i == 1, TRUE, FALSE),  # Solo la primera visible\n      boxpoints = \"outliers\",\n      marker = list(color = \"#6BAED6\"),\n      line = list(color = \"#2171B5\")\n    )\n}\n\n# Layout con men√∫ desplegable para filtrar por campus\nfig &lt;- fig %&gt;%\n  layout(\n    title = \"Distribuci√≥n de edad por programa y campus\",\n    yaxis = list(title = \"Edad\"),\n    xaxis = list(title = \"Programa\", tickangle = -45),\n    showlegend = FALSE,\n    updatemenus = list(\n      list(\n        type = \"dropdown\",\n        direction = \"down\",\n        x = 0.1,\n        y = 1.2,\n        buttons = lapply(seq_along(niveles_campus), function(i) {\n          visibilidad &lt;- rep(FALSE, length(niveles_campus))\n          visibilidad[i] &lt;- TRUE\n          list(\n            method = \"restyle\",\n            args = list(\"visible\", visibilidad),\n            label = niveles_campus[i]\n          )\n        })\n      )\n    )\n  )\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(hover_text = paste0(\n    \"Campus: \", campus, \"&lt;br&gt;\",\n    \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n    \"Porcentaje: \", pct, \"%\"\n  ))\n\n# 5. Fijar niveles con \"Todos\" primero\nniveles_campus &lt;- c(\"Todos\", \"Bucaramanga\", \"Cucuta\", \"Valledupar\")\ndatos_final$campus &lt;- factor(datos_final$campus, levels = niveles_campus)\n\n# 6. Gr√°fico con filtro por campus\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  hovertext = ~hover_text,\n  hoverinfo = \"text\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"  # Valor por defecto\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n porcentual de la Edad por campus (hasta 40 a√±os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a√±os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(niveles_campus, function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(pais), campus %in% c(\"Bucaramanga\", \"C√∫cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, pais) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(pais)) %&gt;%\n  count(pais, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Fijar niveles con \"Todos\" primero\nniveles_campus &lt;- c(\"Todos\", \"Bucaramanga\", \"C√∫cuta\", \"Valledupar\")\n\n# 4. Unir todo\ndatos_final &lt;- bind_rows(datos_plot, todos) %&gt;%\n  mutate(campus = factor(campus, levels = niveles_campus))\n\n# 5. Pie chart con filtro por campus\nplot_ly(\n  data = datos_final,\n  labels = ~pais,\n  values = ~n,\n  type = \"pie\",\n  textinfo = \"label+percent\",\n  hoverinfo = \"label+percent+value\",\n  marker = list(colors = brewer.pal(8, \"Pastel1\")),\n  rotation = 270,\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci√≥n del pa√≠s de origen por campus\",\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(niveles_campus, function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Campus Filtro</span>"
    ]
  }
]