[
  {
    "objectID": "Sesion1.html",
    "href": "Sesion1.html",
    "title": "3 Sesi칩n 1. Informaci칩n personal y Acad칠mica",
    "section": "",
    "text": "3.1 Distribuci칩n geogr치fica",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>Sesi칩n 1. Informaci칩n personal y Acad칠mica</span>"
    ]
  },
  {
    "objectID": "Sesion1.html#distribuci칩n-geogr치fica",
    "href": "Sesion1.html#distribuci칩n-geogr치fica",
    "title": "3 Sesi칩n 1. Informaci칩n personal y Acad칠mica",
    "section": "",
    "text": "3.1.1 Nacional (pendiente actualizar)\nLa distribuci칩n de los departamentos de procedencia de los estudiantes se refleja en el mapa de Colombia. Entre los departamentos con mayor procedencia est치n Santander liderando la participaci칩n con un XXX% del total de estudiantes. Le siguen Cesar con XXX% y Norte de Santander con XXX%, consolid치ndose como las regiones con mayor representaci칩n.\nLos dem치s departamentos registran una participaci칩n conjunta del 15.7%, destacando entre ellos Amazonas, Huila, Tolima y Antioquia, entre otros. Aunque su presencia es menor, su participaci칩n evidencia la diversidad geogr치fica de los estudiantes y el alcance regional de la instituci칩n.\n\n\n3.1.2 Departamental (pendiente actualizar)\nLa distribuci칩n de los estudiantes en los municipios de Santander se refleja en el mapa. Bucaramanga concentra el 47.3% del total de estudiantes, mientras que el 치rea metropolitana de Bucaramanga, incluyendo Floridablanca, Piedecuesta y Gir칩n, alcanza una representaci칩n del 78.6%. Por su parte, Barrancabermeja registra una participaci칩n del 7.3%, siendo el municipio con mayor presencia fuera del 치rea metropolitana. El resto de los municipios de Santander representan en conjunto el 14%.",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>Sesi칩n 1. Informaci칩n personal y Acad칠mica</span>"
    ]
  },
  {
    "objectID": "Sesion1.html#perfil-demogr치fico",
    "href": "Sesion1.html#perfil-demogr치fico",
    "title": "3 Sesi칩n 1. Informaci칩n personal y Acad칠mica",
    "section": "3.2 Perfil Demogr치fico",
    "text": "3.2 Perfil Demogr치fico\n\n3.2.1 Edad\n\n\n\n\n\n\nDescripci칩n para todos los campus\n\n\n\nEn t칠rminos generales, entre los estudiantes de reci칠n ingreso a la UDES se observa que la poblaci칩n estudiantil es menor de 20 a침os. En ese sentido el 52,4% se concentra en el rango etario de 16-18 a침os, mientras que el 29% se ubica entre los 18-20 a침os. En la siguiente grafica se muestra el box plot de la edad por programas.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAbreviaturas de programas acad칠micos\n\n\n\n ANTR: Antropolog칤a, INQU: Instrumentaci칩n Quir칰rgica, MYPB: Mercadeo y Publicidad, ADFI: Administraci칩n Financiera, TEOC: Terapia Ocupacional, FONO: Fonoaudiolog칤a, FISI: Fisioterapia, ININ: Ingenier칤a Industrial, TCGF: Tecnolog칤a en Comunicaci칩n Gr치fica, BACT: Bacteriolog칤a y Laboratorio Cl칤nico, MEDI: Medicina, ADNI: Administraci칩n de Negocios Internacionales, INCI: Ingenier칤a Civil, PSIC: Psicolog칤a, LEIN: Licenciatura en Educaci칩n Infantil, ENFE: Enfermer칤a, DERE: Derecho, MBIN: Microbiolog칤a Industrial, MEVE: Medicina Veterinaria, INAG: Ingenier칤a Agroindustrial, INSO: Ingenier칤a de Software, CONT: Contadur칤a P칰blica, TSOC: Tecnolog칤a en Supervisi칩n de Obras Civiles, COSP: Comunicaci칩n Social y Periodismo, GEOL: Geolog칤a, ICCI: Ingenier칤a en Ciencias de la Computaci칩n e Inteligencia Artificial, INSI: Ingenier칤a de Sistemas, DIGR: Dise침o Gr치fico, COEX: Comercio Exterior, MVZC: Medicina Veterinaria y Zootecnia, IQBO: Instrumentaci칩n Quir칰rgica (Bogot치), TLAC: T칠cnico Laboral en Competencias para Auxiliar de Cl칤nica Veterinaria. \n\n\n\n\n3.2.2 Estado civil\n\n\n\n\n\n\nDescripci칩n para todos los campus\n\n\n\nEl 95,6% de estos estudiantes son solteros, lo cual representa la gran mayor칤a de la poblaci칩n estudiantil. La uni칩n libre representa el 3,41% y los estudiantes casados constituyen apenas el 1,03%\n\n\n\n\n\n\n\n\n\n\n3.2.3 Sexo\n\n\n\n\n\n\nDescripci칩n para todos los campus\n\n\n\nEn relaci칩n con el sexo, el 61,3% de los participantes eran mujeres y el 38,8% eran hombres.\n\n\n\n\n\n\n\n\n\n\n3.2.4 Pais de origen\n\n\n\n\n\n\nDescripci칩n para todos los campus\n\n\n\nLa gr치fica presenta la distribuci칩n porcentual de estudiantes seg칰n su pa칤s de origen. La poblaci칩n estudiantil es predominantemente colombiana (96,4%), mientras que al realizar un filtro y seleccionar solo los estudiantes extranjeros se distribuyen de la siguiente manera: venezolanos 80,4%, espa침oles 6,52%, mexicanos 6,52%, ecuatorianos 4,32% y estadounidenses 2,17%.\n\n\n\n\n\n\n\n\n##Dificultades Acad칠micas y Dominio de Idiomas\n\n\n\n\n\n\nDescripci칩n para todos los campus\n\n\n\nEn cuanto al grado de dificultad en educaci칩n b치sica y media, 45,2% de los estudiantes manifestaron un grado de dificultad entre muy alto y alto en comprensi칩n lectora, mientras que 40% reportaron lo mismo en expresi칩n oral, y 32% indicaron dificultades en matem치ticas.\nAdem치s, los resultados evidencian dificultades en habilidades en cuanto a an치lisis (42%), comprensi칩n (43,2%), atenci칩n (43,7%), memoria (39,3%) y adaptaci칩n (33,7%).\nEl 73,2% de los encuestados describieron su desempe침o acad칠mico como bueno, el 18,6% como excelente, y solo el 8,1% lo calific칩 como regular.",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>Sesi칩n 1. Informaci칩n personal y Acad칠mica</span>"
    ]
  },
  {
    "objectID": "filtro.html",
    "href": "filtro.html",
    "title": "4 Campus Filtro",
    "section": "",
    "text": "4.1 Distribuci칩n de Edad por Campus\nSeleccione un campus para visualizar la distribuci칩n de edad correspondiente. El gr치fico se actualiza autom치ticamente con base en su selecci칩n.\nlibrary(dplyr)\nlibrary(plotly)\n\n# Preparar datos\ndata_plot_drop &lt;- datos |&gt;\n  filter(campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\"), !is.na(edad)) |&gt;\n  mutate(campus_total = campus)  # duplicar para crear opci칩n \"Todos\"\n\n# Agregar fila con etiqueta \"Todos\"\ndata_total &lt;- data_plot_drop |&gt; \n  mutate(campus = \"Todos\")  # etiqueta adicional\n\n# Combinar\ndata_all &lt;- bind_rows(data_plot_drop, data_total)\n\n# Lista de opciones del dropdown\ncampus_levels &lt;- unique(data_all$campus)\n\n# Crear gr치fico interactivo\npd &lt;- data_all |&gt;\n  plot_ly(\n    type = 'histogram',\n    x = ~edad,\n    autobinx = FALSE,\n    xbins = list(start = 0, end = 40, size = 2),\n    marker = list(color = '#004899'),\n    transforms = list(\n      list(\n        type = 'filter',\n        target = ~campus,\n        operation = '=',\n        value = \"Todos\"  # Mostrar todos inicialmente\n      )\n    )\n  ) |&gt; layout(\n    title = \"Distribuci칩n de la Edad por Campus\",\n    xaxis = list(title = \"Edad\"),\n    yaxis = list(title = \"Frecuencia\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(campus_levels, function(c) {\n          list(\n            method = \"restyle\",\n            args = list(\"transforms[0].value\", c),\n            label = c\n          )\n        })\n      )\n    )\n  )\n\npd\nlibrary(dplyr)\nlibrary(plotly)\n\n# Preparar datos\ndata_plot_drop &lt;- datos |&gt;\n  filter(campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\"), !is.na(edad)) |&gt;\n  mutate(campus_total = campus)  # duplicar para crear opci칩n \"Todos\"\n\n# Agregar fila con etiqueta \"Todos\"\ndata_total &lt;- data_plot_drop |&gt; \n  mutate(campus = \"Todos\")  # etiqueta adicional\n\n# 1. Agrupar edades por intervalos\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus)) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE)) %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n\n# 2. Crear gr치fico con filtro interactivo\nplot_ly(\n  data = datos_plot,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~paste0(pct, \"%\"),\n  textposition = \"outside\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = unique(datos_plot$campus)[1]\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n porcentual de la Edad por campus (hasta 40 a침os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a침os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje (%)\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_plot$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\n\nWarning: Ignoring 2 observations\n# Buscar caracteres no v치lidos en 'programa'\nproblemas &lt;- datos %&gt;%\n  filter(!is.na(programa)) %&gt;%\n  filter(is.na(iconv(programa, from = \"\", to = \"UTF-8\")))\n\nprint(problemas$programa)\n\ncharacter(0)\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos)\n\n# 5. Crear gr치fico interactivo con filtro\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~paste0(pct, \"%\"),\n  textposition = \"outside\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"  # valor por defecto\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n porcentual de la Edad por campus (hasta 40 a침os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a침os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(etiqueta = paste0(\"Campus: \", campus, \"&lt;br&gt;\",\n                           \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n                           \"Porcentaje: \", pct, \"%\"))\n\n# 5. Crear gr치fico interactivo con filtro\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~etiqueta,\n  textposition = \"outside\",\n  hoverinfo = \"text\",  # &lt;&lt;-- evita duplicados\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"  # valor por defecto\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n porcentual de la Edad por campus (hasta 40 a침os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a침os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(etiqueta = paste0(\"Campus: \", campus, \"&lt;br&gt;\",\n                           \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n                           \"Porcentaje: \", pct, \"%\"))\n\n# 5. Gr치fico interactivo sin texto visible permanente\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  text = ~etiqueta,\n  hoverinfo = \"text\",  # Solo aparece al pasar el mouse\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n porcentual de la Edad por campus (hasta 40 a침os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a침os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(hover_text = paste0(\n    \"Campus: \", campus, \"&lt;br&gt;\",\n    \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n    \"Porcentaje: \", pct, \"%\"\n  ))\n\n# 5. Gr치fico sin etiquetas visibles, solo en hover\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  hovertext = ~hover_text,\n  hoverinfo = \"text\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n porcentual de la Edad por campus (hasta 40 a침os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a침os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(datos_final$campus), function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Filtrar y agrupar por estado civil y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Datos para 'Todos'\ntodos &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  group_by(est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Combinar\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Crear gr치fico de pastel con filtro\nfig &lt;- plot_ly(type = 'pie', hole = 0.3)  # Gr치fico vac칤o base\n\n# Campus 칰nicos\ncampus_niveles &lt;- unique(datos_final$campus)\n\n# A침adir una traza por cada campus\nfor (i in seq_along(campus_niveles)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == campus_niveles[i])\n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$est_civ,\n    values = datos_c$n,\n    name = campus_niveles[i],\n    visible = ifelse(i == 1, TRUE, FALSE),  # Solo el primero visible\n    type = \"pie\",\n    textinfo = \"percent+label\",\n    sort = FALSE,\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 5. Dropdown para filtros\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci칩n del estado civil por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    active = 0,\n    type = \"dropdown\",\n    buttons = lapply(seq_along(campus_niveles), function(i) {\n      list(\n        method = \"restyle\",\n        args = list(\"visible\", as.list(seq_along(campus_niveles) == i)),\n        label = campus_niveles[i]\n      )\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar datos por campus y estado civil\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Datos combinados para \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  group_by(est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Combinar todos los campus\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Crear gr치fico con filtro interactivo sin agujero\nfig &lt;- plot_ly(type = 'pie')  # SIN `hole = 0.3`\n\n# Campus disponibles\ncampus_niveles &lt;- unique(datos_final$campus)\n\n# A침adir una traza por campus\nfor (i in seq_along(campus_niveles)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == campus_niveles[i])\n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$est_civ,\n    values = datos_c$n,\n    name = campus_niveles[i],\n    visible = ifelse(i == 1, TRUE, FALSE),  # Solo visible el primero\n    type = \"pie\",\n    textinfo = \"percent+label\",\n    sort = FALSE,\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 5. Filtro interactivo (dropdown)\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci칩n del estado civil por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    active = 0,\n    type = \"dropdown\",\n    buttons = lapply(seq_along(campus_niveles), function(i) {\n      list(\n        method = \"restyle\",\n        args = list(\"visible\", as.list(seq_along(campus_niveles) == i)),\n        label = campus_niveles[i]\n      )\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos (campus y estado civil)\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, est_civ) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  count(est_civ, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Unir todos\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Lista de campus\nniveles_campus &lt;- unique(datos_final$campus)\n\n# 5. Paleta pastel (tantos colores como categor칤as de estado civil)\ncolores_pastel &lt;- brewer.pal(n = max(3, length(unique(datos_final$est_civ))), name = \"Pastel1\")\n\n# 6. Crear gr치fico base con todas las trazas invisibles excepto la inicial\nfig &lt;- plot_ly(type = \"pie\")\n\nfor (i in seq_along(niveles_campus)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == niveles_campus[i])\n  \n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$est_civ,\n    values = datos_c$n,\n    type = \"pie\",\n    name = niveles_campus[i],\n    visible = ifelse(i == 1, TRUE, FALSE),\n    textinfo = \"label+percent\",\n    hoverinfo = \"label+percent+value\",\n    sort = FALSE,\n    marker = list(colors = colores_pastel),\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 7. Layout con men칰 desplegable\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci칩n del estado civil por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    type = \"dropdown\",\n    direction = \"down\",\n    x = 0.1, y = 1.2,\n    buttons = lapply(seq_along(niveles_campus), function(i) {\n      visibilidad &lt;- rep(FALSE, length(niveles_campus))\n      visibilidad[i] &lt;- TRUE\n      list(method = \"restyle\",\n           args = list(\"visible\", visibilidad),\n           label = niveles_campus[i])\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos (campus y sexo)\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(sexo_id), campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, sexo_id) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(sexo_id)) %&gt;%\n  count(sexo_id, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Unir todos\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Lista de campus\nniveles_campus &lt;- unique(datos_final$campus)\n\n# 5. Paleta pastel (tantos colores como categor칤as de estado civil)\ncolores_pastel &lt;- brewer.pal(n = max(3, length(unique(datos_final$est_civ))), name = \"Pastel1\")\n\nWarning: Unknown or uninitialised column: `est_civ`.\n\n# 6. Crear gr치fico base con todas las trazas invisibles excepto la inicial\nfig &lt;- plot_ly(type = \"pie\")\n\nfor (i in seq_along(niveles_campus)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == niveles_campus[i])\n  \n  fig &lt;- fig %&gt;% add_trace(\n    labels = datos_c$sexo_id,\n    values = datos_c$n,\n    type = \"pie\",\n    name = niveles_campus[i],\n    visible = ifelse(i == 1, TRUE, FALSE),\n    textinfo = \"label+percent\",\n    hoverinfo = \"label+percent+value\",\n    sort = FALSE,\n    marker = list(colors = colores_pastel),\n    direction = \"clockwise\",\n    rotation = 90\n  )\n}\n\n# 7. Layout con men칰 desplegable\nfig &lt;- fig %&gt;% layout(\n  title = \"Distribuci칩n del sexo por campus\",\n  showlegend = TRUE,\n  updatemenus = list(list(\n    type = \"dropdown\",\n    direction = \"down\",\n    x = 0.1, y = 1.2,\n    buttons = lapply(seq_along(niveles_campus), function(i) {\n      visibilidad &lt;- rep(FALSE, length(niveles_campus))\n      visibilidad[i] &lt;- TRUE\n      list(method = \"restyle\",\n           args = list(\"visible\", visibilidad),\n           label = niveles_campus[i])\n    })\n  ))\n)\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Preparar los datos: cuenta y porcentaje\nestado_civil_df &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  count(est_civ) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1),\n         label = paste0(est_civ, \": \", pct, \"%\"))\n\n# 2. Gr치fico de pastel interactivo\nplot_ly(\n  data = estado_civil_df,\n  labels = ~est_civ,\n  values = ~pct,\n  type = 'pie',\n  textinfo = 'label+percent',\n  hoverinfo = 'text',\n  text = ~label,\n  marker = list(colors = RColorBrewer::brewer.pal(n = max(3, nrow(estado_civil_df)), name = \"Pastel1\"))\n) %&gt;%\n  layout(\n    title = \"Estado civil de los estudiantes\",\n    showlegend = TRUE\n  )\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por campus y estado civil\nestado_civil_df &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ)) %&gt;%\n  count(campus, est_civ, name = \"n\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 2. Agregar una categor칤a \"Todos\"\ntodos_df &lt;- datos %&gt;%\n  filter(!is.na(est_civ)) %&gt;%\n  count(est_civ, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\",\n         pct = round(100 * n / sum(n), 1))\n\n# 3. Combinar ambas\nestado_civil_full &lt;- bind_rows(estado_civil_df, todos_df)\n\n# 4. Crear gr치fico interactivo\nplot_ly(\n  data = estado_civil_full %&gt;% filter(campus == \"Todos\"),\n  labels = ~est_civ,\n  values = ~pct,\n  type = 'pie',\n  textinfo = 'label+percent',\n  insidetextorientation = 'radial',\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n de estado civil por campus\",\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(unique(estado_civil_full$campus), function(c) {\n          list(\n            method = \"restyle\",\n            args = list(\"transforms[0].value\", c),\n            label = c\n          )\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos (campus y estado civil)\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(est_civ), campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, prog_abrev) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(prog_abrev)) %&gt;%\n  count(est_civ, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Unir todos\ndatos_final &lt;- bind_rows(datos_plot, todos)\n\n# 4. Lista de campus\nniveles_campus &lt;- unique(datos_final$campus)\n\n\nplot_ly(data=datos, x = ~campus, y = ~edad, color = ~campus, type = \"box\")\nlibrary(plotly)\nplot_ly(data=datos, x = ~ prog_abrev, y = ~edad, color = ~prog_abrev, type = \"box\")\n\nWarning in RColorBrewer::brewer.pal(N, \"Set2\"): n too large, allowed maximum for palette Set2 is 8\nReturning the palette you asked for with that many colors\nWarning in RColorBrewer::brewer.pal(N, \"Set2\"): n too large, allowed maximum for palette Set2 is 8\nReturning the palette you asked for with that many colors\n\n\n\n\n\nshowlegend = FALSE  # 游녣 Asegurar que se oculte la leyenda general\n\n# Convertir columnas de texto a UTF-8\ndatos &lt;- datos %&gt;%\n  mutate(across(where(is.character), ~ iconv(., from = \"\", to = \"UTF-8\")))\n\ndatos &lt;- datos %&gt;%\n  mutate(across(where(is.character), ~ iconv(., from = \"\", to = \"UTF-8\", sub = \"\")))\n\n# Buscar caracteres no v치lidos en 'programa'\nproblemas &lt;- datos %&gt;%\n  filter(!is.na(prog_abrev)) %&gt;%\n  filter(is.na(iconv(prog_abrev, from = \"\", to = \"UTF-8\")))\n\nprint(problemas$prog_abrev)\n\ncharacter(0)\nlibrary(dplyr)\nlibrary(plotly)\n\n# Asegurar codificaci칩n UTF-8\ndatos &lt;- datos %&gt;%\n  mutate(across(where(is.character), ~ iconv(., from = \"\", to = \"UTF-8\", sub = \"\")))\n\n# Agregar opci칩n \"Todos\"\ndatos_todos &lt;- datos %&gt;%\n  filter(!is.na(prog_abrev), !is.na(edad)) %&gt;%\n  mutate(campus = \"Todos\")\n\ndatos_final &lt;- bind_rows(datos, datos_todos)\n\n# Niveles de campus\nniveles_campus &lt;- c(\"Todos\", \"Bucaramanga\", \"Cucuta\", \"Valledupar\")\n\n# Crear gr치fico base con todas las trazas (una por campus)\nfig &lt;- plot_ly()\n\nfor (i in seq_along(niveles_campus)) {\n  datos_c &lt;- datos_final %&gt;% filter(campus == niveles_campus[i])\n  \n  fig &lt;- fig %&gt;%\n    add_boxplot(\n      data = datos_c,\n      x = ~prog_abrev,\n      y = ~edad,\n      name = niveles_campus[i],\n      visible = ifelse(i == 1, TRUE, FALSE),  # Solo la primera visible\n      boxpoints = \"outliers\",\n      marker = list(color = \"#6BAED6\"),\n      line = list(color = \"#2171B5\")\n    )\n}\n\n# Layout con men칰 desplegable para filtrar por campus\nfig &lt;- fig %&gt;%\n  layout(\n    title = \"Distribuci칩n de edad por programa y campus\",\n    yaxis = list(title = \"Edad\"),\n    xaxis = list(title = \"Programa\", tickangle = -45),\n    showlegend = FALSE,\n    updatemenus = list(\n      list(\n        type = \"dropdown\",\n        direction = \"down\",\n        x = 0.1,\n        y = 1.2,\n        buttons = lapply(seq_along(niveles_campus), function(i) {\n          visibilidad &lt;- rep(FALSE, length(niveles_campus))\n          visibilidad[i] &lt;- TRUE\n          list(\n            method = \"restyle\",\n            args = list(\"visible\", visibilidad),\n            label = niveles_campus[i]\n          )\n        })\n      )\n    )\n  )\n\nfig\nlibrary(dplyr)\nlibrary(plotly)\n\n# 1. Agrupar por intervalos de edad y campus\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(edad), !is.na(campus), edad &lt; 44) %&gt;%\n  mutate(grupo_edad = cut(edad, breaks = seq(14, 44, by = 2), right = FALSE))\n\n# 2. Datos por campus\npor_campus &lt;- datos_plot %&gt;%\n  group_by(campus, grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  group_by(campus) %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1)) %&gt;%\n  ungroup()\n\n# 3. Datos totales (\"Todos\")\ntodos &lt;- datos_plot %&gt;%\n  group_by(grupo_edad) %&gt;%\n  summarise(n = n(), .groups = \"drop\") %&gt;%\n  mutate(campus = \"Todos\") %&gt;%\n  mutate(pct = round(100 * n / sum(n), 1))\n\n# 4. Combinar\ndatos_final &lt;- bind_rows(por_campus, todos) %&gt;%\n  mutate(hover_text = paste0(\n    \"Campus: \", campus, \"&lt;br&gt;\",\n    \"Edad: \", grupo_edad, \"&lt;br&gt;\",\n    \"Porcentaje: \", pct, \"%\"\n  ))\n\n# 5. Fijar niveles con \"Todos\" primero\nniveles_campus &lt;- c(\"Todos\", \"Bucaramanga\", \"Cucuta\", \"Valledupar\")\ndatos_final$campus &lt;- factor(datos_final$campus, levels = niveles_campus)\n\n# 6. Gr치fico con filtro por campus\nplot_ly(\n  data = datos_final,\n  x = ~grupo_edad,\n  y = ~pct,\n  type = \"bar\",\n  hovertext = ~hover_text,\n  hoverinfo = \"text\",\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"  # Valor por defecto\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n porcentual de la Edad por campus (hasta 40 a침os)\",\n    xaxis = list(title = \"Edad (intervalos de 2 a침os)\", tickangle = -45),\n    yaxis = list(title = \"Porcentaje\", ticksuffix = \"%\"),\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(niveles_campus, function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(RColorBrewer)\n\n# 1. Preparar los datos\ndatos_plot &lt;- datos %&gt;%\n  filter(!is.na(campus), !is.na(pais), campus %in% c(\"Bucaramanga\", \"C칰cuta\", \"Valledupar\")) %&gt;%\n  group_by(campus, pais) %&gt;%\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Agregar \"Todos\"\ntodos &lt;- datos %&gt;%\n  filter(!is.na(pais)) %&gt;%\n  count(pais, name = \"n\") %&gt;%\n  mutate(campus = \"Todos\")\n\n# 3. Fijar niveles con \"Todos\" primero\nniveles_campus &lt;- c(\"Todos\", \"Bucaramanga\", \"C칰cuta\", \"Valledupar\")\n\n# 4. Unir todo\ndatos_final &lt;- bind_rows(datos_plot, todos) %&gt;%\n  mutate(campus = factor(campus, levels = niveles_campus))\n\n# 5. Pie chart con filtro por campus\nplot_ly(\n  data = datos_final,\n  labels = ~pais,\n  values = ~n,\n  type = \"pie\",\n  textinfo = \"label+percent\",\n  hoverinfo = \"label+percent+value\",\n  marker = list(colors = brewer.pal(8, \"Pastel1\")),\n  rotation = 270,\n  transforms = list(\n    list(\n      type = 'filter',\n      target = ~campus,\n      operation = '=',\n      value = \"Todos\"\n    )\n  )\n) %&gt;%\n  layout(\n    title = \"Distribuci칩n del pa칤s de origen por campus\",\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = lapply(niveles_campus, function(c) {\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", c),\n               label = c)\n        })\n      )\n    )\n  )",
    "crumbs": [
      "<span class='chapter-number'>4</span> <span class='chapter-title'>Campus Filtro</span>"
    ]
  }
]